<section class="space-y-4">
  <div class="flex flex-wrap items-center justify-between gap-3">
    <div>
      <h2 class="text-lg font-semibold">tng-table demo</h2>
      <p class="text-sm text-gray-600">Add / remove / clear / reset + sortable headers.</p>

      <div class="mt-2 text-sm">
        <span class="font-medium">Current sort:</span>
        <code class="rounded bg-gray-100 px-2 py-1">
          {{ sort().active || '—' }} {{ sort().direction || '—' }}
        </code>
      </div>
    </div>

    <div class="flex flex-wrap items-center gap-2">
      <button type="button" class="rounded-md border border-border bg-bg px-3 py-1.5 text-sm" (click)="addRow()">
        Add row
      </button>

      <button type="button" class="rounded-md border border-border bg-bg px-3 py-1.5 text-sm" (click)="removeFirst()">
        Remove first
      </button>

      <button type="button" class="rounded-md border border-border bg-bg px-3 py-1.5 text-sm" (click)="removeLast()">
        Remove last
      </button>

      <button type="button" class="rounded-md border border-border bg-bg px-3 py-1.5 text-sm" (click)="clear()">
        Clear
      </button>

      <button type="button" class="rounded-md border border-border bg-bg px-3 py-1.5 text-sm" (click)="reset()">
        Reset
      </button>
    </div>
  </div>

  <div class="overflow-auto rounded-md border border-border">
    <tng-table
      [rows]="rows()"
      rowKey="id"
      emptyText="No transactions"
      (sortChange)="onSortChange($event)"
    >
      <!-- Date sortable header -->
      <tng-col id="date" header="Date" [value]="dateValue">
        <ng-template tngHeader let-colId="colId" let-header="header">
          <button
            type="button"
            class="inline-flex w-full items-center gap-1 hover:underline"
            tngSortHeader
            [colId]="colId"
          >
            <span class="truncate">{{ header }}</span>
            <tng-sort-icon />
          </button>
        </ng-template>
      </tng-col>

      <tng-col id="description" header="Description" [value]="descValue">
        <ng-template tngCell let-row let-value="value">
          <div class="flex items-start justify-between gap-3">
            <div class="flex flex-col">
              <span class="font-medium">{{ value }}</span>
              <span class="text-xs text-gray-500">{{ row.id }}</span>
            </div>

            <button
              type="button"
              class="rounded-md border border-border bg-bg px-2 py-1 text-xs"
              (click)="removeById(row.id)"
              aria-label="Remove row"
            >
              Remove
            </button>
          </div>
        </ng-template>
      </tng-col>

      <!-- Amount sortable header -->
      <tng-col id="amount" header="Amount" align="right" [value]="amountValue">
        <ng-template tngHeader let-colId="colId" let-header="header">
          <div class="flex w-full items-center justify-end gap-2">
            <button
              type="button"
              class="inline-flex items-center gap-1 hover:underline"
              tngSortHeader
              [colId]="colId"
            >
              <span>{{ header }}</span>
              <tng-sort-icon />
            </button>
            <span class="opacity-60">₹</span>
          </div>
        </ng-template>

        <ng-template tngCell let-value="value">
          @if (value < 0) {
            <span class="font-semibold text-red-600">{{ value }}</span>
          } @else {
            <span class="font-semibold text-green-600">{{ value }}</span>
          }
        </ng-template>
      </tng-col>

      <tng-col id="status" header="Status" width="120px" [value]="statusValue">
        <ng-template tngCell let-value="value">
          <span
            class="inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold"
            [class]="badgeClass(value)"
          >
            {{ value }}
          </span>
        </ng-template>
      </tng-col>
    </tng-table>
  </div>
</section>
