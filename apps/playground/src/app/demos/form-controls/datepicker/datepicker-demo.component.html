<div class="mx-auto max-w-4xl space-y-6 p-6">
  <div class="flex flex-wrap items-end justify-between gap-3">
    <div>
      <div class="text-xl font-semibold text-slate-900">Datepicker Demo</div>
      <div class="text-sm text-slate-500">
        Reactive Forms + CVA + Overlay popup (input + calendar icon)
      </div>
    </div>

    <div class="flex flex-wrap gap-2">
      <button
        type="button"
        class="rounded-md border border-border bg-alternate-background px-3 py-2 text-sm hover:bg-alternate-background active:translate-y-[1px]"
        (click)="toggleDisabled()"
      >
        @if (disabled()) { <span>Enable</span> } @else { <span>Disable</span> }
      </button>

      <button
        type="button"
        class="rounded-md border border-border bg-alternate-background px-3 py-2 text-sm hover:bg-alternate-background active:translate-y-[1px]"
        (click)="setToday()"
      >
        Today
      </button>

      <button
        type="button"
        class="rounded-md border border-border bg-alternate-background px-3 py-2 text-sm hover:bg-alternate-background active:translate-y-[1px]"
        (click)="clear()"
      >
        Clear
      </button>

      <button
        type="button"
        class="rounded-md bg-alternate-background px-3 py-2 text-sm text-fg border border-border hover:bg-fg-hover active:translate-y-[1px]"
        (click)="submit()"
      >
        Submit
      </button>
    </div>
  </div>

  <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
    <!-- Left: picker -->
    <div class="rounded-lg border border-border bg-bg p-4">
      <div class="mb-3 flex items-center justify-between">
        <div class="text-sm font-semibold text-fg">Pick a date</div>

        <div class="text-xs text-disable">
          Range:
          <span class="font-medium">{{ minLabel() }}</span>
          →
          <span class="font-medium">{{ maxLabel() }}</span>
        </div>
      </div>

      <form [formGroup]="form" class="space-y-3">
        <tng-datepicker formControlName="period" [min]="min" [max]="max"></tng-datepicker>

        @if (form.controls.period.touched && form.controls.period.invalid) {
          <div class="rounded-md bg-warning px-3 py-2 text-sm text-slate-900">
            Please select a valid date.
          </div>
        }
      </form>
      <tng-datepicker min="1800" max="2400" displayFormat="DD-MM-YYYY" previewFormat="DD MMMM YYYY"></tng-datepicker>
    </div>

    <!-- Right: info -->
    <div class="rounded-lg border border-border bg-bg p-4">
      <div class="text-sm font-semibold text-slate-700">Live value</div>

      <div class="mt-3 space-y-3">
        <div class="rounded-md border border-border bg-alternate-background p-3">
          <div class="text-xs text-slate-500">Formatted (dayjs)</div>
          <div class="text-lg font-semibold text-slate-900">{{ valueLabel() }}</div>
        </div>

        <div class="rounded-md border border-border bg-bg p-3">
          <div class="text-xs text-slate-500">Debug</div>
          <div class="font-mono text-sm text-slate-800">{{ debugValue() }}</div>
        </div>

        <div class="rounded-md border border-border bg-alternate-background p-3">
          <div class="text-xs text-slate-500">Control status</div>
          <div class="mt-1 flex flex-wrap gap-2 text-sm text-slate-800">
            <span class="rounded-md border border-border bg-bg px-2 py-1">
              touched: {{ form.controls.period.touched }}
            </span>
            <span class="rounded-md border border-border bg-bg px-2 py-1">
              dirty: {{ form.controls.period.dirty }}
            </span>
            <span class="rounded-md border border-border bg-bg px-2 py-1">
              valid: {{ form.controls.period.valid }}
            </span>
            <span class="rounded-md border border-border bg-bg px-2 py-1">
              disabled: {{ form.controls.period.disabled }}
            </span>
          </div>
        </div>

        <div class="rounded-md border border-border bg-bg p-3">
          <div class="text-xs text-disable">Pipe formatted</div>
          <div class="text-sm text-fg">
            {{ form.controls.period.value ? (form.controls.period.value | date:'dd MMM yyyy') : '—' }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
