<div [class]="rootKlass()">
  <!-- Hidden native input -->
  <input
    #fileInput
    type="file"
    class="sr-only"
    [disabled]="isDisabled()"
    [accept]="accept()"
    [multiple]="multiple()"
    (change)="onNativeChange($event)"
    (blur)="onBlur()"
  />

  <!-- Dropzone -->
  <div
    tngFileDropzone
    [disabled]="isDisabled()"
    [accept]="accept()"
    [multiple]="multiple()"
    (filesDropped)="onDropped($event)"
    (dragActiveChange)="onDragActiveChange($event)"
    [class]="dropzoneClasses()"
    role="button"
    tabindex="0"
    (click)="openPicker()"
    (keydown.enter)="openPicker()"
    (keydown.space)="openPicker()"
  >
    <div class="flex items-start justify-between gap-4">
      <div class="space-y-1">
        <div [class]="titleKlass()">{{ title() }}</div>
        <div [class]="subtitleKlass()">{{ subtitle() }}</div>
      </div>

      @if (value()?.length) {
        <button
          type="button"
          [class]="clearButtonKlass()"
          (click)="$event.stopPropagation(); clear()"
        >
          Clear
        </button>
      }
    </div>

    @if (accept()) {
      <div class="mt-2" [class]="hintKlass()">
        Accepted: {{ accept() }}
      </div>
    }
  </div>

  <!-- File list -->
  @if (value()?.length) {
    <div [class]="fileListKlass()">
      @for (f of value()!; track trackByName($index, f)) {
        <div [class]="fileItemKlass()">
          <span class="truncate">{{ f.name }}</span>
          <span class="ml-3 text-xs text-disable">
            {{ (f.size / 1024).toFixed(1) }} KB
          </span>
        </div>
      }
    </div>
  }
</div>
